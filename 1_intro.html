<!DOCTYPE html>
<html>
  <head>
    <title>Introducción a R</title>
    <meta charset="utf-8">
    <meta name="author" content="Roberto Salas" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introducción a R
## 🚙💨 crash course mode
### Roberto Salas
### 18/07/2018 (actualizado: 2018-10-09)

---





# ¿Qué es R?

- R es un lenguaje para computación estadística y gráficos desarrollado en la Universidad de Auckland por Ross Ihaka y Robert Gentlemany. Su sintaxis es muy similar al lenguaje S de Bell Laboratories permitiendo inclusive correrlo sin modificación en un entorno R.

- R es solo un interprete de comandos al igual que Python, Ruby o Perl, por tanto se puede usar directamente desde una terminal.

- Existen diversas interfaces gráficas que anidan R entre las cuales se cuentan: RStudio, Bioconductor, R Commander, Rattle, RKWard, Deducer, entre otras; sin embargo, la más ampliamente usada y recomendada es RStudio.

- Existen múltiples formas de trabajo de análisis de datos donde existen distintos *approach*: Base R, Tidyverse y data.table. La diferencia entre cada uno rádica en la construcción de la sintaxis y la velocidad de ejecución.

---

# Desventajas de R

.left-column[
![R Inferno](http://www.burns-stat.com/wp-content/uploads/2012/12/R_inferno_cover.jpg)
]

.right-column[
- Desarrollado por estadísticos no programadores
- Problemas en manejo de memoria
- Sintaxis ilegible e inconsistente&lt;sup&gt;*&lt;/sup&gt;
- Calidad cuestionable de algunos paquetes
- R es *single threaded* lo que dificulta escalamiento en datasets grandes y el paralelismo en operaciones aritméticas&lt;sup&gt;*&lt;/sup&gt;
- Necesidad de cargar los dataset completos en memoria
]

.footnote[[*] Hoy existen avances respecto a estos puntos.]

---

# Ventajas de R

.left-column[
&lt;img src="http://r4ds.had.co.nz/cover.png" height="250px" /&gt;
]

.right-column[
- CRAN es uno de los repositorios más grandes de paquetes
- Implementaciones de nuevas ideas y metodologías generalmente aparecen primero en R
- Extremadamente rápido para el análisis estadístico
- Excelente para prototipado
- Creación de reportes e interfaces avanzadas con R Markdown y Shiny
]

---

# ¿Que puedo hacer con R?

- Estadística
- Graficos y visualizaciones (ggplot2, lattice, base R, r2d3, shiny)
- Análisis geoespacial (sf, sp, leaflet, mapdeck)
- Presentaciones en HTML o PDF (xarigan y rmarkdown)
- Informes, papers y libros (rmarkdown, radix y bookdown)
- Sitios web (blogdown)
- y mucho más!
---

class: center

# RStudio

&lt;div class="figure"&gt;
&lt;img src="http://www.7wdata.be/wp-content/uploads/2016/11/a-complete-tutorial-to-learn-data-science-in-r-from-scratch.png" alt="Fuente: http://www.7wdata.be/wp-content/uploads/2016/11/a-complete-tutorial-to-learn-data-science-in-r-from-scratch.png" width="800px" /&gt;
&lt;p class="caption"&gt;Fuente: http://www.7wdata.be/wp-content/uploads/2016/11/a-complete-tutorial-to-learn-data-science-in-r-from-scratch.png&lt;/p&gt;
&lt;/div&gt;

---

# Buscando ayuda

- `help(mean)` o `?`
- `apropos("mean")`
- `example(mean)`
- RStudio help
- Google usando *[R] keyword*
- stackoverflow (http://stackoverflow.com) &lt;sup&gt;*&lt;/sup&gt;

.footnote[[*] Procurar no copiar y pegar]

---

# Sintaxis básica de R

- `#` representa un comentario dentro del script
- `;` separa comandos (rara vez usado)
- variables no se declaran antes de usarse y pueden ser utilizadas en funciones
- formas de asignar valores a variables
  - `a &lt;- b`
  - `b -&gt; a`
  - `assign("a", b)`
  - `a = b`
- variables globales usando `&lt;&lt;-`
- carga de librerias usando `library()`
- instalación de librerias usando `install.packages()` o GUI
- `::` permite el acceso a funciones dentro de paquetes
- `$` actua sobre *data.frames* permitiendo acceder a contenidos de columnas
- ayuda rápida de comandos `?function_name`
- obtener directorio de trabajo `getwd()` y setear con `setwd()`
- listar variables en el entorno `ls()`, borrar con `rm()` y borrar todo con `rm(list = ls())`

---

# Tipos de datos: Vectores atómicos

### ¿Que son?

Concatenación de elementos en un vector de la forma `a &lt;- c(1,2,3,4,5)` o `1:9` o `seq(2, 3, by=0.5)` o `rep(1:2, times=3)` o `rep(1:2, each=3)`


### Tipos más utilizados

- Logical (TRUE, FALSE, NA)
- Integer (1, 2, 3, 4, 5)
- Double (1.0, 2.0, 3.0, 4.0)
- Character ("a", "b", "c", "d", "e")
- Factor (vector de caracteres con valores fijos)

---

# Tipos de datos: Vectores atómicos

### Funciones sobre vectores

- `sort(x)`
- `order(x)`
- `table(x)`
- `rev(x)`
- `unique(x)`

### Selección de elementos (por posición) en vectores

- `x[4]`
- `x[-4]`
- `x[2:4]`
- `x[-(2:4)]`
- `x[c(1, 5)]`

---

# Tipos de datos: Vectores atómicos

### Selección de elementos (por valor) en vectores

- `x[x == 10]`
- `x[x &lt; 0]`
- `x[x %in% c(1, 2, 5)]`

---

### Funciones aritméticas sobre vectores

- Trigonometría: `sin()`, `cos()`, `tan()`, `acos()`, `asin()` y `atan()`
- Redondeo: `abs()`, `ceiling()`, `floor()`, `round()`, `sign()`, `signif()`, `sqrt()` y `trunc()`
- Logaritmos y exponenciales: `exp()`, `log()`, `log10()` y `log2()`
- Tendencia central: `mean(x)`, `median(x)`, `var(x)`, `sd(x)`
- Min - Max: `max(x)` o `min(x)`
- Suma serie: `sum(x)`
- Correlación: `cor(x,y)`

---

# Tipos de datos: Matrices


```r
x &lt;- c(3,7,4,2,1,2,3,6,4)
m &lt;- matrix(x, nrow = 3, ncol = 3)
m
```

```
##      [,1] [,2] [,3]
## [1,]    3    2    3
## [2,]    7    1    6
## [3,]    4    2    4
```

---

# Tipos de datos: Matrices

### Selección de elementos en una matriz


```r
m
```

```
##      [,1] [,2] [,3]
## [1,]    3    2    3
## [2,]    7    1    6
## [3,]    4    2    4
```
.pull-left[
### Filas


```r
m[2, ]
```

```
## [1] 7 1 6
```
]

.pull-right[
### Columnas


```r
m[ ,1]
```

```
## [1] 3 7 4
```
]

---

# Tipos de datos: Matrices

### Operaciones


```r
m
```

```
##      [,1] [,2] [,3]
## [1,]    3    2    3
## [2,]    7    1    6
## [3,]    4    2    4
```

#### Transpose


```r
t(m)
```

```
##      [,1] [,2] [,3]
## [1,]    3    7    4
## [2,]    2    1    2
## [3,]    3    6    4
```

---

# Tipos de datos: Matrices

#### Multiplicación

.pull-left[

```r
x &lt;- c(7,7,3,4,2,6,3,1,2)
z &lt;- matrix(x, nrow = 3, ncol = 3)
z
```

```
##      [,1] [,2] [,3]
## [1,]    7    4    3
## [2,]    7    2    1
## [3,]    3    6    2
```
]

.pull-right[

```r
x &lt;- c(1,5,6,7,3,3,1,2,1)
n &lt;- matrix(x, nrow = 3, ncol = 3)
n
```

```
##      [,1] [,2] [,3]
## [1,]    1    7    1
## [2,]    5    3    2
## [3,]    6    3    1
```
]


```r
z %*% n
```

```
##      [,1] [,2] [,3]
## [1,]   45   70   18
## [2,]   23   58   12
## [3,]   45   45   17
```

---

# Tipos de datos: Matrices

#### Resolución de ecuaciones

`$$\begin{array} {lcl} 3x+2y &amp; = &amp; 8 \\ x + y&amp; = &amp; 2 \end{array}$$`


.pull-left[

```r
a &lt;- matrix(c(3,1,2,1),nrow=2,ncol=2)
a
```

```
##      [,1] [,2]
## [1,]    3    2
## [2,]    1    1
```
]

.pull-right[

```r
b &lt;- matrix(c(8,2),nrow=2,ncol=1)
b
```

```
##      [,1]
## [1,]    8
## [2,]    2
```
]


```r
solve(a,b)
```

```
##      [,1]
## [1,]    4
## [2,]   -2
```

---

# Tipos de datos: Data frames

### Forma básica



```r
z &lt;- data.frame(x = 1:3, y = c('a', 'b', 'c'))
z
```

```
##   x y
## 1 1 a
## 2 2 b
## 3 3 c
```

### Información


```r
nrow(z)
```

```
## [1] 3
```


```r
ncol(z)
```

```
## [1] 2
```

---

# Tipos de datos: Data frames

.pull-left[

### Selección filas


```r
z[1, ]
```

```
##   x y
## 1 1 a
```

### Selección columnas


```r
z[ ,1]
```

```
## [1] 1 2 3
```

]

.pull-right[

### Filtrado


```r
z[z$y=="a", ]
```

```
##   x y
## 1 1 a
```


```r
subset(z, y == "a")
```

```
##   x y
## 1 1 a
```
  
]

---

# Archivos CSV (Comma separated values)

Los archivos CSV o TSV son bases de datos que se separan sus columnas por medio de comas, punto y comas o cualquier otro caracter. 

En R existen varias formas de manejarlos:

- Base R utiliza el comando *read.csv* o *read.csv2* dentro del paquete *utils*.
- Tidyverse utiliza el comando *read_csv* o *read_csv2* dentro del paquete *readr*.

.pull-left[

### Lectura


```r
read.csv2("db/baseex.csv")
```

```
##   a b c d
## 1 1 2 3 4
## 2 5 6 7 8
```

]

.pull-right[

### Escritura

```
write.csv2(data.frame, "db/baseex.csv")
```

]

---

# Archivos RDS y RData

Los archivos RDS y RData son formatos nativos de R para el guardado de objetos, es decir, un vector se guarda como un vector o un dataframe como dataframe. 


.pull-left[

### Lectura

#### RDS

```
readRDS("db/baseex.rds")
```

#### RData

```
load("db/baseex.RData")
```

]

.pull-right[

### Escritura

#### RDS

```
saveRDS(data.frame, "db/baseex.rds")
```

#### RData

```
save(data.frame, file = "baseex.RData")
```

]

---

# Archivos Excel

Existen múltiples paquetes para el trabajo con archivos excel (*xlsx*, *readxl*, *writexl*, *basictabler*, etc). El que ha adquirido mayor notoriedad es *readxl* porque no posee dependencias externas y además es extremadamente rápido por estar escrito en C y C++. Sin embargo, este software fue dividido y no posee funciones de escritura de archivos por ende se debe usar en conjunto con *writexl*.

.pull-left[

### Lectura


```r
library(readxl)
read_excel("db/Libro1.xlsx", sheet = 1, range = "E6:G9")
```

```
## # A tibble: 3 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5     6
## 3     7     8     9
```
]

.pull-right[

### Escritura

```
write_excel(dataframe, "db/Libro1.xlsx")
```
]
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
